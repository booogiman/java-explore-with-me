# Приложение Explore With Me (дипломный проект)

Explore With Me — приложение, которое дает возможность делиться информацией об интересных событиях и
помогает найти компанию для участия в них.

## Основные возможности приложения

* События - Создание событий с различными параметрами (платные/бесплатные, место проведения,
  дата, количество участников, категория и т.д.).
* Заявки на посещение мероприятия - Можно выбирать события и оставлять заявку на посещение.
* Доступ к информации - Разные возможности по редактированию и получению информации для
  пользователей и администраторов, модерация событий, фильтрация по параметрам (дата проведения,
  категория и т.д.)
* Подборки событий - Администраторы могут группировать события по каким-либо признакам, а
  пользователи знакомиться с подборками.
* Сбор статистики по просмотрам событий для выбора самых популярных.

## Архитектура

Приложение состоит из 2 сервисов:

* Основной сервис — содержит всё необходимое для работы с событиями
* Сервис статистики — хранит количество просмотров и позволяет делать различные выборки для анализа
  работы приложения.

## Инструкция по запуску приложения

Для корректной работы приложения необходимо наличие на компьютере Docker. Оба сервиса запускаются
следующей командой:

```Bash
mvn install
docker-compose up
```

## Спецификация API

API основного сервиса разделено на три части. Первая — публичная, доступна без регистрации любому
пользователю сети. Вторая — закрытая, доступна только авторизованным пользователям. Третья —
административная, для администраторов сервиса.

- [API основного сервиса](https://github.com/booogiman/java-explore-with-me/blob/main/ewm-main-service-spec.json)
- [API сервиса по сбору статистики](https://github.com/booogiman/java-explore-with-me/blob/main/ewm-stats-service-spec.json)

Для просмотра спецификаций используйте [редактор Swagger](https://editor-next.swagger.io/).


При запущенном контейнере

- [SWAGGER основного сервиса](http://localhost:8080/swagger-ui/index.html#/)
- [SWAGGER сервиса по сбору статистики](http://localhost:9090/swagger-ui/index.html#/)


## Используемые технологии

* Spring Boot
* Maven
* Lombok
* Hibernate ORM
* PostgreSQL
* Docker
* OpenAPI Specification

## Спецификация дополнительной возможности

Список комментариев привязан к событию, при запросе события пользователь получает список комментариев к нему.
Нельзя оставлять комментарии к неопубликованным событиям.
Комментарий для редактирования не может быть старше одной недели.

### Private: Комментарии

<details>
  <summary> POST users/{userId}/events/{eventId}/comments <br />
     Добавление нового комментария к событию.
</summary>
Пример запроса:

```json
{
  "content": "Новый комментарий на событие"
}
```

Пример ответа:

```json
{
  "id": 1,
  "content": "Новый комментарий на событие",
  "authorName": "Username",
  "created": "2022-11-02 09:07:45"
}
```

</details>  
<details>
  <summary> PATCH users/events/comments <br />
     Редактирование комментария к событию.
</summary>
Пример запроса:

```json
{
  "id": 1,
  "content": "Отредактированный комментарий на событие"
}
```

Пример ответа:

```json
{
  "id": 1,
  "content": "Отредактированный комментарий на событие",
  "authorName": "Username",
  "created": "2022-11-02 09:07:45"
}
```

</details> 
<details>
  <summary> GET /users/{userId}/comments <br />
     Получение всех комментариев пользователя
</summary>
</details> 

### Admin: Комментарии

<details>
  <summary> PATCH /admin/events/comments/ <br />
     Редактирование комментария администратором
</summary>
Пример запроса:

```json
{
  "id" : 1,
  "content": "Отредактированный администратором комментарий на событие"
}
```

Пример ответа:

```json
{
  "id": 1,
  "content": "Отредактированный администратором комментарий на событие",
  "authorName": "Username",
  "created": "2022-11-02 09:07:45"
}
```

</details>
<details>
  <summary> DELETE /admin/events/{eventId}/comments/{commentId}/ <br />
     Удаление комментария администратором
</summary>
</details>

